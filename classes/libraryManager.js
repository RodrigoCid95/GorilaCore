"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Library=exports.LibraryManager=void 0;var tslib_1=require("tslib"),log_1=require("./log"),LibraryManager=function(){function r(r,e){this.loaderConfig=r,this.libraries=e,this.librariesInstances={},this.compiled=!1}return r.prototype.build=function(){var r,e,i,o;return tslib_1.__awaiter(this,void 0,void 0,(function(){var t,n,s,a,l,c,u,g,d;return tslib_1.__generator(this,(function(b){switch(b.label){case 0:t=0,n=this.libraries,b.label=1;case 1:if(!(t<n.length))return[3,9];s=n[t],a=new s(this.loaderConfig),l=a.__proto__.constructor.name,log_1.Log("Cargando "+l+" ...",null===(e=null===(r=this.loaderConfig.getConfig("server"))||void 0===r?void 0:r.dev)||void 0===e?void 0:e.logger),a.__proto__.build||(console.error("No se encontro el método build en la clase "+l),process.exit()),c=a.build(),b.label=2;case 2:return b.trys.push([2,6,,7]),c instanceof Promise?(u=this.librariesInstances,g=l,[4,c]):[3,4];case 3:return u[g]=b.sent(),[3,5];case 4:this.librariesInstances[l]=c,b.label=5;case 5:return[3,7];case 6:return d=b.sent(),console.error("Error al cargar la librería "+l+".",d),process.exit(),[3,7];case 7:log_1.Log(l+" cargado!",null===(o=null===(i=this.loaderConfig.getConfig("server"))||void 0===i?void 0:i.dev)||void 0===o?void 0:o.logger),b.label=8;case 8:return t++,[3,1];case 9:return this.compiled=!0,[2]}}))}))},r.prototype.getLibrary=function(r){return this.librariesInstances[r]},r.prototype.isCompiled=function(){return this.compiled},r}();exports.LibraryManager=LibraryManager;var Library=function(){function r(r){this.loaderConfig=r,this.log=log_1.Log;var e=this.__proto__.constructor.name;this.profile=this.loaderConfig.getConfig(e)}return r.prototype.build=function(){return null},r}();exports.Library=Library;