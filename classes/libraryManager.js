"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Library=exports.LibraryManager=void 0;var tslib_1=require("tslib"),log_1=require("./log"),LibraryManager=function(){function r(r,e){this.loaderConfig=r,this.libraries=e,this.librariesInstances={},this.compiled=!1}return r.prototype.build=function(){var r,e,i,t;return tslib_1.__awaiter(this,void 0,void 0,(function(){var o,n,s,a,l,u,g,c,d,b,f;return tslib_1.__generator(this,(function(h){switch(h.label){case 0:for(n in o=[],this.libraries)o.push(n);s=0,h.label=1;case 1:if(!(s<o.length))return[3,9];a=o[s],l=this.libraries[a],u=l.name,log_1.Log("Cargando "+u+" ...",null===(e=null===(r=this.loaderConfig.getConfig("server"))||void 0===r?void 0:r.dev)||void 0===e?void 0:e.logger),g=void 0,"build"in l.prototype?(c=new l(this.loaderConfig),g=c.build()):g=l(this.loaderConfig.getConfig(u)),h.label=2;case 2:return h.trys.push([2,6,,7]),g instanceof Promise?(d=this.librariesInstances,b=u,[4,g]):[3,4];case 3:return d[b]=h.sent(),[3,5];case 4:this.librariesInstances[u]=g,h.label=5;case 5:return[3,7];case 6:return f=h.sent(),console.error("Error al cargar la librerÃ­a "+u+".",f),process.exit(),[3,7];case 7:log_1.Log(u+" cargado!",null===(t=null===(i=this.loaderConfig.getConfig("server"))||void 0===i?void 0:i.dev)||void 0===t?void 0:t.logger),h.label=8;case 8:return s++,[3,1];case 9:return this.compiled=!0,[2]}}))}))},r.prototype.getLibrary=function(r){return this.librariesInstances[r]},r.prototype.isCompiled=function(){return this.compiled},r}();exports.LibraryManager=LibraryManager;var Library=function(){function r(r){this.loaderConfig=r,this.log=log_1.Log;var e=this.__proto__.constructor.name;this.profile=this.loaderConfig.getConfig(e)}return r.prototype.build=function(){return null},r}();exports.Library=Library;